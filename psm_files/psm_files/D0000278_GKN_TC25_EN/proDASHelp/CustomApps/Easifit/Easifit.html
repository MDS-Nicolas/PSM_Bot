<!DOCTYPE HTML>
<html>
<!-- #BeginTemplate "/Templates/Modules.dwt" --><!-- DW6 -->

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">  

<!--Start, needed for Search highlighting-->
<style type="text/css">.highlight { background: #FFFF40; }</style>
<script type="text/javascript" src="../../highlight.js"></script>
<!--End, needed for Search highlighting-->

<!-- #BeginEditable "doctitle" --> 
<title>EASIFIT</title>
<!-- #EndEditable --> 
<link rel="stylesheet" href="../../stylemodule.css" type="text/css">
</head>

<body>
<!-- #BeginEditable "Main" -->
<div float:left><h1 id="Easifit">EASIFIT (Option*)<a href="#" onClick="window.print(); return false;"><img src="../../Images/IconPrint.png" alt="Print Icon" width="45" height="62" style="display:block; float: right;" ></a></h1></div>
<h2 id="Overview">Overview</h2>
<p>EASIFIT is a specific file format that is designed to interface with the Rolls-Royce on-line data analysis programs which operate on the AliCE experimental 
analyser computer.</p>
<p>The EASIFIT transfer program (EAIF) can convert the data created by proDAS into EASIFIT formatted files, and initiate the transfer of the EASIFIT files to the AliCE workstation, such that they can be analysed on line by the Rolls-Royce tools executing on that workstation.</p>
<p>The EASIFIT transfer program, called EAIF (Experimental Analyser Interface), executes locally on the Host Computer and complies with Issue 7 of the Rolls-Royce CSN0435 specification.</p>
<p>The Experimental Analyser Interface program (EAIF) is configurable. The user can have all fullsets and transient logs transferred continuously (automatically) 
  as they are recorded by proDAS or the user can selectively decide which records will be processed into EASIFIT format and transferred. The EAIF program can 
process the following data files that are generated by proDAS to:</p>
<ul>
  <li>convert fullsets (steady-state data) to EASIFIT format</li>
  <li>convert transient logs (transient data) to EASIFIT format</li>
  <li>convert critical logs (transient data) to EASIFIT format</li>
  <li>transfer the formatted EASIFIT logs and fullsets</li>
  <li>transfer the Unified Event Log, TOC&amp;EUM reports and Test Diary as text files</li>
  <li>maintain a status file recording the status of all file transfer operations</li>
  <li>optionally display the returned display file from the AliCE workstation</li>
  <li>delete all temporary files after the EASIFIT conversion is complete</li>
</ul>
<h2 id="ChannelNameFormat">Channel Name Format</h2>
<p>The EAIF program will convert the data for a given channel only if the name of that channel conforms to the following naming convention (syntax):</p>
<ul>
  <li>the channel name is defined by eight or less characters</li>
  <li>the channel name starts with a letter or an underscore</li>
  <li>all characters of the channel name are upper case</li>
</ul>
<p class="Note">Channel names that do not comply with these naming conventions will be ignored by EAIF.</p>
<h3 id="FullsetEasifitFiles">Fullset Based EASIFIT Files</h3>
<p>Fullsets (Steady-state), when recorded, are automatically stored in the Test Results and Sensor Calibration Database (TRSCDB). Once a fullset is recorded, DB_server starts EAIF and passes the Test Cell ID, Test ID and Event ID so that EAIF can extract and process the fullset. EAIF uses the Test Cell ID, Test ID and Event ID to retrieve the Extract ID from the eaif_server.</p>
<p>The directory path where the temporary EASIFIT files are stored is the EASIFIT root directory as determined in the configuration file, normally  /users/RTE/analysis/RRDSIF/EASIFIT. The temporary EASIFIT file name is a concatenation of the Test Name, Fullset Comment (description), and Extract ID. The filename is in the form:</p>
<ul>
  <li>(7 characters from the test name) + (8 characters from the fullset description) + (4 characters representing the extract ID)</li>
</ul>
<p>The naming convention for the EASIFIT file name follows:</p>
<ul>
  <li>if the Test Name is more than 7 characters, then the Test Name is truncated</li>
  <li>if the Test Name is less than 7 characters, then the Test Name is padded on the left with underscores (&quot;_&quot;)</li>
  <li>if the Fullset Comment is more than 7 characters, then the Fullset Comment is truncated</li>
  <li>if the Fullset Comment is less than 7 characters, then the Fullset Comment is padded on the right with underscores (&quot;_&quot;)</li>
  <li>the Extract ID is a unique identifier for Fullsets
    <ul>
      <li>the Extract ID is stored and read from the file /users/RTE/analysis/RRDSIF/EASIFIT/TESTNAME.ids</li>
      <li>the Extract ID is a sequence number within a test name and type and is four characters in length</li>
      <li>the Extract ID starts at 1 and has a maximum value of 9999 (if this limit is reached, EASIFIT files will not be created)</li>
      <li>if the Extract ID is less than 1000, then the Extract ID is left padded with zeroes</li>
    </ul>
  </li>
</ul>
<p>EAIF generates the following EASIFIT output files that are transferred to the AliCE workstation:</p>
<ul>
  <li>MPI</li>
  <li>UNITS</li>
  <li>FRVALS</li>
</ul>
<h3 id="HistLogEasifitFiles">Transient Log Based EASIFIT Files</h3>
<p>Each time a transient log is saved by proDAS, the associated log name is passed to EAIF for processing. EAIF uses the Log Filename, Engine Name and Test Name to retrieve the Extract ID from the eaif_server.</p>
<p>The filename for a transient logs is a concatenation of the Test Name, Log Name, and Extract ID. The filename is in the form:</p>
<ul>
  <li>(7 characters from the test name) + (8 characters from the log file description) + (4 characters representing the extract ID)</li>
</ul>
<p>The naming convention for the EASIFIT file name follows:</p>
<ul>
  <li>if the Test Name is more than 7 characters, then the Test Name is truncated</li>
  <li>if the Test Name is less than 7 characters, then the Test Name is padded on the left with underscores (&quot;_&quot;)</li>
  <li>if the Log Description is more than 8 characters, then the Log Description is truncated</li>
  <li>if the Log Description is less than 8 characters, then the Log Description is padded on the right with underscores (&quot;_&quot;)</li>
  <li>the Extract ID is a unique identifier for Transient or Critical logs
    <ul>
      <li>the Extract ID is stored and read from the file easi_root/TESTNAME.ids</li>
      <li>the Extract ID is a sequence number within a test name and type and is four characters in length</li>
      <li>the Extract ID starts at 1 and has a maximum value of 9999 (if this limit is reached, EASIFIT files will not be created)</li>
      <li>if the Extract ID is less than 1000, then the Extract ID is left padded with zeroes</li>
    </ul>
  </li>
</ul>
<p>EAIF generates the following EASIFIT output files that are transferred to the AliCE workstation:</p>
<ul>
  <li>MPI</li>
  <li>UNITS</li>
  <li>FRSIZE</li>
  <li>FRFIRPOS</li>
  <li>FRMINREP</li>
  <li>FRMINPOS</li>
  <li>FRSAMP</li>
  <li>FRELTIME</li>
  <li>FRVALS</li>
  <li>SKEW (optionally created if specified in the initialisation file for EAIF (.eaif_r2d2.config file))</li>
</ul>
<h2 id="EAIFconfigFiles">Experimental Analyser Interface (EAIF) Configuration Files</h2>
<p>The Experimental Analyser Interface is a program that interfaces between proDAS and the Rolls-Royce workstaton. The interface (EAIF) is configured through a series of initialisation files that are stored in the &quot;/users/RTE/bin/exe&quot; directory on the Host Computer. The following files are used in determining 
  how EAIF operates, which files are converted, and where they are transferred:</p>
<ul>
  <li>proDAS initialisation file (.config)</li>
  <li>Real-Time Database Server initialisation file (.pDB_config)</li>
  <li>EAIF initialisation file (.eaif_r2d2.config)</li>
</ul>
<h3 id="RTEinitialiseFile">RTE Initialisation File</h3>
<p>The RTE Initialisation File (i.e.: .config file) is a text file and can be edited with any text editor. This file controls how the proDAS Real-Time Engine is configured. This file also controls how certain parameters are passed to EAIF when a transient or critical log is ready to be converted to EASIFIT format.</p>
<p>The following entry must be present in the proDAS initialisation file for the automatic processing of transient logs to EASIFIT format:</p>
<blockquote>
  <p>CI log_conversion RRDS /users/RTE/bin/exe/eaif -f /users/RTE/bin/exe/.eaif_r2d2.config -t TR</p>
</blockquote>
<p> The following entry must be present in the proDAS initialisation file for the automatic processing of critical logs to EASIFIT format:</p>
<blockquote>
  <p>CI crit_description RRDS /users/RTE/bin/exe/eaif -f /users/RTE/bin/exe/.eaif_r2d2.config -t TR</p>
</blockquote>
<p><a href="../../References/DASIniFiles/RTEInitialisationFile.pdf">Click here to view the RTE Initialisation File.</a></p>
<h3 id="DBserverInitialiseFile">RT DB Server Initialisation File</h3>
<p>The Real-Time Database Server initialisation file (i.e.: .pDB_config file) is a text file and can be edited with any text editor. The file controls how the database server program (DB_server) will communicate with the proDAS database, the proDAS real-time software, and how it launches the EAIF (Experimental Analyser Interface) program.</p>
<p>The Real-Time Database Server is responsible for storing, to the Test Results and Sensor Calibration Database (TRSCDB), all fullsets (steady-state) that are generated by proDAS during an engine test. The Real-Time Database Server also calls and passes certain parameters to EAIF when a fullset is ready to be converted to EASIFIT format.</p>
<p>The following entry must be present in the Real-Time Database Server initialisation file for the automatic processing of fullsets to EASIFIT format:</p>
<blockquote>
  <p> FS_CONVERSION /users/RT/bin/exe/eaif -f /users/RTE/bin/exe/.eaif_r2d2.config 
    -t SS -c $TESTCELliD$ -i $TESTID$ -e $EVENTID$ </p>
</blockquote>
<p><a href="../../References/DASIniFiles/SoftwareiniFiles.pdf">Click here to view the .pDB_config file.</a></p>
<h3 id="EAIFinitialiseFile">EAIF Initialisation File</h3>
<p>The EAIF Initialisation File (i.e.: .eaif_r2d2.config file) is a text file and can be edited with any text editor. The file controls how the EAIF program is configured, and all subsequent parameters, locations for trace files, and computers that are involved in the EASIFIT conversion and transfer method.</p>
<p><a href="../../References/DASIniFiles/SoftwareiniFiles.pdf">Click here to view the .eaif_r2d2.config file.</a></p>
<p class="Note">For additional information regarding the parameters in the .eaif_r2d2.config file and additional features, options and their usage, see the eaif.usage text file located in the /users/RTE/bin/exe directory on the Host Computer.</p>
<h2 id="EASIFITGUI">EASIFIT Graphical User Interface (GUI)</h2>
<p>The EASIFIT GUI allows a user to perform an EASIFIT transfer of <strong>fullset</strong> and<strong> transient log data</strong>. From the selected test name, all tests accessed by the utility, obtain their test cell name from the configuration file. The utility displays all fullsets associated with the selected test name assuming event_type_id obtained from the query.</p>
<p>The transfer status of each fullset is displayed as either OK, Failed or N/A.</p>
<p>All transient logs associated with the selected test name from the log directory on the  Host Computer are displayed. The ability to select one or more fullsets for transfer and select one or more transient logs for transfer allows the user to initiate a data transfer of the selected fullsets and transient logs. If this data was previously transferred, it can be retransferred. The user can transfer all fullsets and transient logs that previously failed to transfer, using the <strong>Transmit All Failed Items</strong> button.</p>
<p>The Status Report field displays the progress of the data transfer for the selected fullsets and transient logs. The status of each transfer operation is displayed, and in the case of failure a corresponding error code is given. Each data transfer has the option to be cancelled.</p>
<p>The utility deletes the file that contains a previous transfer status before starting a data transfer. This guarantees the transfer status is current.</p>
<p class="Note">The successfully transferred logs are deleted within the stipulated 3-14 expiry days (configurable).</p>
<p>The utility has an EASIFITGUI.ini file and easifitgui.xs file. The initialisation file is located in the config directory and the .xs file in the XStart directory relative to the location of the EASIFITGUI.exe.</p>
<p id="EASIFITGUIini">The <strong>EASIFITGUI.ini</strong> file consists of the following sections:</p>
<ul>
  <li><strong>[TRACE]</strong></li>
  <li><strong>[INFO_PAGE]</strong></li>
  <li><strong>[TRANSFER]</strong></li>
</ul>
<p>The <strong>[TRACE]</strong> section fields include:</p>
<ul>
  <li>LEVEL &ndash; for tracing level</li>
  <li>TAG &ndash; for tracing tag</li>
  <li>TRACE_DIR &ndash; path to the tracing folder</li>
  <li>TRACE_FILENAME &ndash; the tracing filename</li>
</ul>
<p>The <strong>[INFO_PAGE]</strong> section fields include:</p>
<ul>
  <li>DSN &ndash; the DSN </li>
  <li>UID &ndash; user ID </li>
  <li>PWD - password </li>
  <li>TEST_CELL_NAME &ndash; test cell name </li>
  <li>MAP_PATH_TO_LOGFILES &ndash; mapping drive to transient logs </li>
  <li>TIMEOUT_SEC &ndash; maximum time (in seconds) we allow to wait for a fullset or transient log transfer before we report the timeout of the transfer </li>
</ul>
<p>The <strong>[TRANSFER]</strong> section fields include:</p>
<ul>
  <li>TRANSFER_CMD &ndash; the path to the script file being run on the Host Computer </li>
  <li>TRANSFER_LOG_PATH &ndash; the Host Computer path to the logs folder </li>
  <li>TRANSFER_RETURN_PATH &ndash; the path to the file that contains the transfer status </li>
</ul>
<h3 id="ConfigFile">Configuration File</h3>
<p>A sample configuration file is displayed below.</p>
<blockquote>
  <p>[TRACE]</p>
  <p>LEVEL=1<br>
    TAG=EZF<br>
    TRACE_FILENAME=C:\TRACE\trace.txt</p>
  <p>[INFO_PAGE]<br>
    DSN=r_prodas<br>
    UID=engineer<br>
    PWD=thehelp<br>
    TEST_CELL_NAME=BED_056<br>
    MAP_PATH_TO_LOGFILES=Y:<br>
    TIMEOUT_SEC=300</p>
  <p>[TRANSFER]<br>
    TRANSFER_CMD=/bin/ksh /users/RTE/bin/exe/eaif_gui.ksh<br>
    TRANSFER_LOG_PATH=/disk3/users/RTE/logs<br>
    TRANSFER_RETURN_PATH=W:\bin\tmp\EAIF_RET_STATUS</p>
</blockquote>
<h2 id="StartEASIFITGUI">Starting the EASIFIT GUI</h2>
<p>The EASIFIT GUI can be started either as a stand-alone application or from the Management GUI Control Panel.</p>
<h4>To start the EASIFIT GUI as an stand-alone application:</h4>
<ol>
  <li>Double-click the EASIFIT GUI executable file, from the Management Interface Computer directory structure.<br>
    The Login window is displayed.
    <div class="Container"><img src="images/Login.png" alt="Login" width="407" height="272"></div>
  </li>
  <li>Select a username from the User Name drop-down list.</li>
  <li>Enter a password in the Password field.</li>
  <li>Select <strong>OK</strong>.<br>
    The EASIFIT GUI window is displayed.</li>
</ol>
<h4>To start the EASIFIT GUI from the Management GUI Control Panel:</h4>
<ol>
  <li>From the Management GUI Control Panel, select <strong>Tools / Post Test Functions / EASIFIT GUI</strong>.<br>
    The EASIFIT GUI window is displayed.
    <div class="Container"><img height="495" src="images/Startup.gif" alt="Startup" width="696"></div>
  </li>
</ol>
<ol>
  <li value="2">Select a test name from the <strong>Test Name</strong> drop-down list.
    <div class="Container"><img height="495" src="images/SelectTestName.gif" alt="Select Test Name" width="696"></div>
  </li>
  <li>Click <strong>Select a Test</strong>.<br>
    All available fullsets are listed in the <strong>Fullsets</strong> panel and all available transient logs are listed in the <strong>Transient Logs</strong> panel for the selected Test Name.
    <div class="Container"><img src="images/SelectTest.gif" alt="Select Test" width="696" height="495"></div>
  </li>
  <li>Select (highlight) the <strong>Fullsets</strong>and <strong>Transient Logs</strong> to be transferred.
    <div class="Container"><img height="495" src="images/FullsetTlogSelection.gif" alt="Fullset Tlog Selection" width="696"></div>
    <p class="Note">To select multiple fullsets or transient logs push and hold the Ctrl key on your keyboard.</p>
  </li>
  <li>Click <strong>Transmit All Selected Items</strong>.<br>
    A status bar is displayed and is updated each time the application finishes transmitting the current item.<br>
    During the transmission of selected items, the <strong>Status Report</strong> panel displays the transmission progress and <strong>Success</strong> or <strong>Failure</strong> information for each transfer.
    <div class="Container"><img height="495" src="images/TransmitAll.gif" alt="Transmit All" width="696"></div>
    <p class="Note">When transmission of selected items is in progress, the Transmit All Selected Items button changes to Cancel, allowing the user to cancel the transmission. When the number of remaining items = 1 the Cancel button is disabled.</p>
  </li>
  <li>Select <strong>Transmit All Failed Items</strong> to start the data transmission of all files with Transfer Status of FAILED for all tests. Check the <strong>Status Report</strong> panel for results.
    <div class="Container"><img height="495" src="images/RetransmitAll.gif" alt="Retransmit All" width="696"></div>
  </li>
</ol>
<h2 id="RetransmitLogFullset">Retransmit a Log or Fullset using EAIF</h2>
<p>From a LINUX window on the Host Computer perform the following steps.</p>
<ol>
  <li>Open the EAIF status log, using vi or nedit, located at <strong>/users/RTE/analysis/RRDSIF/ea_status.log</strong></li>
  <li>Locate the unique identifier, item name, in the second column in the ea_status.log entry of the log or fullset that you would like to retransmit.</li>
  <li>Type the following at the liNUX prompt:<br>
    <strong>/users/RTE/bin/exe/eaif -f /users/RTE/bin/exe/.eaif_r2d2.config &lt;item_name&gt;</strong></li>
</ol>
<p>For more information on EAIF usage refer to the eaif.usage file in the exe directory of the Host Computer.</p>
<h2 id="ReviewDiskSpaceUsage">Reviewing Disk Space Usage</h2>
<p>The ea_status.log file contains some statistics on disk space consumed by the files given to EAIF for transfer.</p>
<p>The fields on the status log's first line items represents the following:</p>
<ul>
  <li>the test cell name (e.g.: CELL1)</li>
  <li>disk space allocated for EAIF for storage in Kb (e.g.: 100000)</li>
  <li>disk space used up in Kb (e.g.: 215)</li>
  <li>disk space remaining in Kb (e.g.: 99785)</li>
  <li>percentage used (e.g.: 0.22)</li>
</ul>
<p>To check the disk space consumed by the EAIF process, perform the following steps from a liNUX window on the Host Computer:</p>
<ol>
  <li>Open the EAIF status log, using vi or nedit, located at <strong>/users/RTE/analysis/RRDSIF/ea_status.log</strong></li>
  <li>Review the first row in the text.</li>
</ol>
<p class="Note">If the total disk space allocated for EAIF storage is exceeded, EAIF will be unable to transfer any additional files. EAIF normally deletes successfully transferred log files within 3 to 14 days of the transfer operation. The delay before deletion is configurable.</p>
<p class="Note">In order to provide more disk space for EAIF transfers, a check can be made to ensure that EAIF is deleting old log files. Alternatively, the .eaif_r2d2.config configuration item &quot;disk_capacity&quot; can be increased to provide additional disk capacity for EAIF.</p>
<br>
<br>
<!-- #EndEditable -->
</body>

<!-- #EndTemplate --></html>
<script type="text/javascript">highlight();</script>
